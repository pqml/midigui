{"version":3,"file":"midigui.umd.js","sources":["../node_modules/mitt/dist/mitt.js","../src/utils/css.js","../src/config/colors.js","../src/elements/container.js","../src/elements/header.js","../src/elements/controller.js","../node_modules/midibus/build/midibus.es.js","../src/midigui.js"],"sourcesContent":["function n(n){return n=n||Object.create(null),{on:function(t,o){(n[t]||(n[t]=[])).push(o)},off:function(t,o){var u=n[t]||(n[t]=[]);u.splice(u.indexOf(o)>>>0,1)},emit:function(t,o){(n[t]||[]).map(function(n){n(o)}),(n[\"*\"]||[]).map(function(n){n(t,o)})}}}module.exports=n;\n//# sourceMappingURL=mitt.js.map","function css (element, style) {\n  for (var k in style) {\n    element.style[k] = style[k]\n  }\n}\n\nexport default css\n","const colors = {\n  primary: '#ffffff',\n  primary2: 'rgba(255, 255, 255, 0.4)',\n  highlight: '#00f3e4',\n  recording: '#dc3737',\n  background: '#000000',\n  background2: '#191919'\n}\n\nexport default colors\n","import css from '../utils/css'\nimport colors from '../config/colors'\n\nfunction container () {\n  const el = document.createElement('div')\n  css(el, {\n    'position': 'fixed',\n    'top': '10px',\n    'left': '10px',\n    'z-index': '9999',\n    'background': colors.background,\n    'color': colors.primary,\n    'font-family': 'sans-serif',\n    'width': '300px',\n    // 'border': '1px solid black',\n    'font-size': '11px'\n  })\n  return { dom: el }\n}\n\nexport default container\n","import css from '../utils/css'\nimport colors from '../config/colors'\n\nfunction header () {\n  const el = document.createElement('div')\n  css(el, {\n    'width': '100%',\n    'border': 'none',\n    'color': colors.background,\n    'padding': '10px',\n    'box-sizing': 'border-box',\n    'background': colors.highlight\n  })\n\n  el.textContent = 'midigui'\n\n  return { dom: el }\n}\n\nexport default header\n","import css from '../utils/css'\nimport colors from '../config/colors'\n\nconst defaultOpts = {\n  name: 'No name',\n  value: 0\n}\n\nfunction controller (opts) {\n  opts = Object.assign({}, defaultOpts, opts)\n\n  const emit = opts.emit\n  const container = document.createElement('div')\n\n  const label = document.createElement('p')\n  const input = document.createElement('p')\n  const slider = document.createElement('div')\n  const thumb = document.createElement('div')\n\n  let attachement = null\n  let value = 0\n  let selected = false\n\n  const api = {\n    dom: container,\n    select,\n    deselect,\n    affect\n  }\n\n  css(container, {\n    'background': colors.background,\n    // 'border-top': '1px solid black',\n    'box-sizing': 'border-box',\n    'padding': '10px 10px 20px 10px'\n  })\n\n  css(label, {\n    'display': 'inline-block',\n    'margin-right': '5px'\n  })\n\n  css(input, {\n    'display': 'inline-block',\n    'color': colors.primary2\n  })\n\n  css(slider, {\n    'margin': '0',\n    'width': '100%',\n    'height': '1px',\n    'background': 'rgba(255, 255, 255, 0.15)'\n  })\n\n  css(thumb, {\n    'width': '10%',\n    'height': '100%',\n    'background': colors.highlight\n  })\n\n  container.addEventListener('mouseenter', () => {\n    if (!selected) container.style.background = colors.background2\n    container.style.cursor = 'pointer'\n  })\n\n  container.addEventListener('mouseleave', () => {\n    if (!selected) container.style.background = colors.background\n  })\n\n  container.addEventListener('click', () => {\n    if (opts.onclick) opts.onclick(api)\n  })\n\n  updateInputName()\n  updateValue(opts.value)\n\n  label.textContent = opts.name\n  slider.appendChild(thumb)\n\n  container.appendChild(label)\n  container.appendChild(input)\n  container.appendChild(slider)\n\n  function select () {\n    selected = true\n    container.style.background = colors.recording\n  }\n\n  function deselect () {\n    selected = false\n    container.style.background = colors.background\n  }\n\n  function updateValue (val) {\n    value = val\n    thumb.style.width = (value * 100) + '%'\n    emit(opts.name, Math.round(val * 127))\n  }\n\n  function updateInputName () {\n    let content = ''\n    if (attachement) {\n      content += attachement.inputName + ' - ' +\n        (attachement.event === 'noteOn' ? 'Note' : 'CC') + ' ' +\n        attachement.pitch\n    } else {\n      content += 'no input'\n    }\n    input.textContent = content\n  }\n\n  function onInput (msg) {\n    if (msg.channel !== attachement.channel || msg.pitch !== attachement.pitch) return\n    updateValue(msg.velocity / 127)\n  }\n\n  function affect (bus, inputName, event, msg) {\n    if (attachement && attachement.bus) attachement.bus.off(attachement.event, onInput)\n    bus.on(event, onInput)\n    attachement = {}\n    attachement.bus = bus\n    attachement.inputName = inputName\n    attachement.event = event\n    attachement.pitch = msg.pitch\n    attachement.channel = msg.channel\n    updateInputName()\n    onInput(msg)\n  }\n\n  return api\n}\n\nexport default controller\n","import mitt from 'mitt';\n\nfunction message(channel, pitch, velocity) {\n  return {\n    channel: channel,\n    pitch: pitch,\n    velocity: velocity\n  };\n}\n\nvar supported = !!navigator.requestMIDIAccess;\n\nvar PACKETS = {\n  noteOn: 0x80,\n  noteOff: 0x90\n};\n\nfunction bus(input, output) {\n  if (!supported) return null;\n  if (!input && !output) {\n    throw new Error('A bus needs a least an input or an output device');\n  }\n\n  var emitter = mitt();\n  if (input) input.onmidimessage = onMessage;\n\n  emitter.send = send;\n  emitter.destroy = destroy;\n  return emitter;\n\n  function onMessage(e) {\n    var cmd = e.data[0] >> 4;\n    var msg = message(e.data[0] & 0xf, e.data[1], e.data[2]);\n\n    if (cmd === 8 || cmd === 9 && msg.velocity === 0) {\n      // noteOff\n      emitter.emit('noteOff', msg);\n    } else if (cmd === 9) {\n      // noteOn\n      emitter.emit('noteOn', msg);\n    } else if (cmd === 11) {\n      // controller message\n      emitter.emit('controllerChange', msg);\n    } else {\n      // sysex or other\n      emitter.emit('sysex', e);\n    }\n  }\n\n  function send(cmd, msg) {\n    if (!output) return;\n    output.send([PACKETS[cmd] ? PACKETS[cmd] + msg.channel : msg.channel, msg.pitch, msg.velocity]);\n  }\n\n  function destroy() {\n    if (input) input.onmidimessage = undefined;\n    input = undefined;\n    output = undefined;\n    emitter.on = undefined;\n    emitter.off = undefined;\n    emitter.emit = undefined;\n    emitter = undefined;\n  }\n}\n\nvar _isReady = false;\nvar inputs = [];\nvar outputs = [];\n\nfunction access(cb) {\n  if (!supported) return null;\n  if (_isReady) return cb(null);\n  navigator.requestMIDIAccess().then(function (res) {\n    res.inputs.forEach(function (el) {\n      return inputs.push(el);\n    });\n    res.outputs.forEach(function (el) {\n      return outputs.push(el);\n    });\n    _isReady = true;\n    cb(null);\n  }, function () {\n    cb(new Error('No access to your midi devices.'));\n  });\n}\n\nexport { supported, inputs, outputs, access, bus, message };\n","import mitt from 'mitt'\nimport createContainer from './elements/container'\nimport createHeader from './elements/header'\nimport createController from './elements/controller'\nimport * as midi from 'midibus'\n\nconst defaultOpts = {\n  append: true,\n  key: 'm',\n  visible: true\n}\n\nfunction midigui (opts) {\n  if (!midi.supported) throw new Error('Web MIDI API not supported on this browser')\n  opts = Object.assign({}, defaultOpts, opts)\n\n  const emitter = mitt()\n  emitter.add = add\n  emitter.show = show\n  emitter.hide = hide\n\n  let ready = false\n  let dom = {}\n\n  let container, selectedController\n  let controllers = {}\n  let visible = !!opts.visible\n\n  midi.access(() => {\n    setupDom()\n    setupInputs()\n    ready = true\n  })\n\n  document.addEventListener('keyup', e => {\n    if (e.key === opts.key) {\n      if (visible) hide()\n      else show()\n    }\n  })\n\n  return emitter\n\n  function setupDom () {\n    container = createContainer()\n    visible ? show() : hide()\n    container.dom.appendChild(createHeader().dom)\n    for (let k in controllers) {\n      const controller = controllers[k]\n      container.dom.appendChild(controller.dom)\n    }\n    if (opts.append) document.body.appendChild(container.dom)\n  }\n\n  function setupInputs () {\n    midi.inputs.forEach(input => {\n      const bus = midi.bus(input)\n      bus.on('noteOn', msg => onInput(bus, input.name, 'noteOn', msg))\n      bus.on('controllerChange', msg => onInput(bus, input.name, 'controllerChange', msg))\n    })\n  }\n\n  function add (name, opts) {\n    if (controllers[name]) {\n      throw new Error('There is already a controller named ' + name)\n    }\n    opts = Object.assign(\n      {},\n      opts,\n      { name, onclick: onControllerSelected, emit: emitter.emit }\n    )\n    const controller = createController(opts)\n    controllers[name] = controller\n    if (ready) dom.main.appendChild(controller)\n    return emitter\n  }\n\n  function onControllerSelected (controller) {\n    if (selectedController) selectedController.deselect()\n    if (selectedController !== controller) {\n      controller.select()\n      selectedController = controller\n    } else {\n      selectedController = undefined\n    }\n  }\n\n  function onInput (bus, inputName, event, msg) {\n    if (selectedController) {\n      selectedController.affect(bus, inputName, event, msg)\n      selectedController.deselect()\n      selectedController = undefined\n    }\n  }\n\n  function hide () {\n    container.dom.style.display = 'none'\n    visible = false\n  }\n\n  function show () {\n    container.dom.style.display = 'block'\n    visible = true\n  }\n}\n\nexport default midigui\n"],"names":["css","element","style","k","colors","primary","primary2","highlight","recording","background","background2","container","el","document","createElement","dom","header","textContent","defaultOpts","name","value","controller","opts","Object","assign","emit","label","input","slider","thumb","attachement","selected","api","select","deselect","affect","addEventListener","cursor","onclick","updateInputName","updateValue","appendChild","val","width","Math","round","content","inputName","event","pitch","onInput","msg","channel","velocity","bus","off","on","append","key","visible","midigui","midi","Error","emitter","mitt","add","show","hide","ready","selectedController","controllers","setupDom","setupInputs","e","createContainer","createHeader","body","forEach","onControllerSelected","createController","main","undefined","display"],"mappings":"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"}